<?xml version="1.0" encoding="UTF-8"?>
<launch>
    <!-- novatel_converter -->
    <node pkg="novatel_converter" exec="bestgnsspos_converter" name="bestgnsspos_converter">
        <param name="use_sim_time" value="true"/>
    </node>

    <!-- path_display -->
    <node pkg="path_display" exec="navsatfix_marker" name="navsatfix_marker">
        <param name="use_sim_time" value="true"/>
    </node>

    <node pkg="path_display" exec="navfusion_path" name="navfusion_path">
        <param name="use_sim_time" value="true"/>
    </node>

    <!-- NavFusion -->
    <node pkg="navfusion" exec="Pwrpak_TPS" name="Pwrpak_TPS">
        <param name="use_sim_time" value="true"/>
        <param name="config_address" value="src/config/libtps_config_330.txt"/>

        <remap from="input_imu" to="/aceinna/openrtk/imu_ros2"/>
        <remap from="input_gnss" to="/novatel/oem7/navsatfix"/>

        <remap from="output_odometry" to="/navfusion_odometry"/>
        <remap from="output_fusion" to="/navfusion_fusion"/>
    </node>

    <!-- basler_poser -->
    <node pkg="basler_poser" exec="image_poser" name="image_poser">
        <param name="use_sim_time" value="true"/>
    </node>

    <!-- velodyne_poser -->
    <node pkg="velodyne_poser" exec="pointcloud2_poser" name="pointcloud2_poser">
        <param name="use_sim_time" value="true"/>
    </node>

    <!-- VINS-Fusion-ROS2 -->
    <!-- <node pkg="vins" exec="vins_node" name="vins_node" args="src/config/vins_config_basler_330.yaml">
        <param name="use_sim_time" value="true"/>
    </node>

    <node pkg="global_fusion" exec="global_fusion_node" name="global_fusion_node">
        <param name="use_sim_time" value="true"/>

        <remap from="/gps" to="/novatel/oem7/navsatfix"/>
    </node> -->

    <!-- Vehicle -->
    <arg name="vehicle_model" default="sample_vehicle"/>
    <arg name="sensor_model" default="sample_sensor_kit"/>
    
    <include file="$(find-pkg-share tier4_vehicle_launch)/launch/vehicle.launch.xml">
        <arg name="vehicle_model" value="$(var vehicle_model)"/>
        <arg name="sensor_model" value="$(var sensor_model)"/>
        <arg name="config_dir" value="$(find-pkg-share $(var sensor_model)_description)/config"/>
    </include>

    <!-- rviz -->
    <arg name="rviz_config" default="$(find-pkg-share pnt_launch)/rviz/autoware.rviz" description="rviz config"/>

    <node pkg="rviz2" exec="rviz2" name="rviz2" args="-d $(var rviz_config)">
        <param name="use_sim_time" value="true"/>
    </node>
</launch>